<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>JSON-LD Proxy</title>
    <script src="static/main.js"></script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org/",
        "@type": "WebPage",
        "name": "JSON-LD Proxy",
        "description": "JSON-LD Proxy</code> is a service that connects to a user provided URL and retrieves the JSON-LD from the target page.",
        "author": {
            "@type": "Person",
            "name": "datadavev",
            "identifier": "https://orcid.org/0000-0002-6513-4996"
        },
        "license": "https://opensource.org/license/mit",
        "subjectOf": "https://github.com/datadavev/jsonld-proxy"
    }
    </script>
</head>
<body>
<header>
    <h1>JSON-LD Proxy</h1>
    <details>
        <summary>About</summary>
    <p><code>JSON-LD Proxy</code> is a service that connects to a user provided URL and retrieves
        the JSON-LD from the target page.
    </p>
    <p>Visit the <a href="/api">API</a>.</p>
    <p>Project on <a href="https://github.com/datadavev/jsonld-proxy">GitHub</a>.</p>
    </details>
</header>
<main>
    <p>
<label for="target">URL to evaluate:</label>
    </p><p>
<input id="target" name="target" type="text" size="80" placeholder="URL"/>
    </p>
    <details>
        <summary>Options:</summary>
        <p>
            <label for="accept">
                <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept" target="_blank">Accept header</a> value:
            </label>
        </p>
        <p>
            <input id="accept" name="accept" type="text" size="80" value="*/*" />
        </p>
    </details>
    <p>
        <button id="submit" name="submit" type="submit" onclick="doLoadUrl()">Submit</button>
    </p>
<section id="outputsection" style="visibility: hidden">
    <p>Request URL: <code id="requesturl"></code><br/>
       Final URL: <code id="finalurl"></code>
    </p>
    <pre id="output"></pre>
</section>
</main>
<script>
    const inp = document.getElementById("target");
    const loc = document.location.hash.match(url_pattern);
    inp.addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            document.getElementById("submit").click();
        }
    });
    if (loc) {
        inp.value = loc[0];
        doLoadUrl();
    }
</script>
</body>
</html>
